<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
    <title>Examples</title>
    <meta name="description" content="">
    <meta name="keywords" content="">

    <script src="../jquery.js"  type="text/javascript" ></script>
    <link href="./reset.css"  type="text/css" rel="stylesheet" />

</head>
<body>

    <div id="rootList" class="jd-category-tab">
    <div style="overflow: hidden; height:568px">
        <div  id="category7">
            <ul style="" id="category6">
                <li class="" m_index="1" m_cid="100001851" id="category10">
                    <a href="javascript:void(0);">潮流女装</a>
                </li>
                <li m_index="2" m_cid="100001852" id="category11" class="">
                    <a href="javascript:void(0);">品牌男装</a>
                </li>
                <li m_index="3" m_cid="100001957" id="category12" class="">
                    <a href="javascript:void(0);">内衣配饰</a>
                </li>
                <li m_index="4" m_cid="670" id="category13" class="">
                    <a href="javascript:void(0);">电脑办公</a>
                </li>
                <li m_index="5" m_cid="9987" id="category14" class="">
                    <a href="javascript:void(0);">手机数码</a>
                </li>
                <li m_index="6" m_cid="1713" id="category15" class="">
                    <a href="javascript:void(0);">图书</a>
                </li>
                <li m_index="7" m_cid="1620" id="category16" class="">
                    <a href="javascript:void(0);">家居家纺</a>
                </li>
                <li m_index="8" m_cid="737" id="category17" class="">
                    <a href="javascript:void(0);">家用电器</a>
                </li>
                <li m_index="9" m_cid="1319" id="category18" class="">
                    <a href="javascript:void(0);">母婴频道</a>
                </li>
                <li m_index="10" m_cid="9847" id="category19" class="">
                    <a href="javascript:void(0);">家具建材</a>
                </li>
                <li m_index="11" m_cid="6196" id="category20" class="">
                    <a href="javascript:void(0);">居家生活</a>
                </li>
                <li m_index="12" m_cid="1318" id="category21" class="">
                    <a href="javascript:void(0);">运动户外</a>
                </li>
                <li m_index="13" m_cid="6144" id="category22" class="">
                    <a href="javascript:void(0);">珠宝饰品</a>
                </li>
                <li m_index="14" m_cid="100001560" id="category23" class="">
                    <a href="javascript:void(0);">奢品礼品</a>
                </li>
                <li m_index="15" m_cid="1672" id="category24" class="">
                    <a href="javascript:void(0);">鞋靴箱包</a>
                </li>
                <li m_index="16" m_cid="1316" id="category25" class="">
                    <a href="javascript:void(0);">个护化妆</a>
                </li>
                <li m_index="17" m_cid="1320" id="category26" class="">
                    <a href="javascript:void(0);">食品生鲜</a>
                </li>
                <li m_index="18" m_cid="6233" id="category27" class="">
                    <a href="javascript:void(0);">玩具乐器</a>
                </li>
                <li m_index="19" m_cid="12259" id="category28" class="">
                    <a href="javascript:void(0);">酒水饮料</a>
                </li>
                <li m_index="20" m_cid="6728" id="category29" class="">
                    <a href="javascript:void(0);">整车车品</a>
                </li>
                <li m_index="21" m_cid="4051" id="category30" class="">
                    <a href="javascript:void(0);">音像制品</a>
                </li>
                <li m_index="22" m_cid="9192" id="category31" class="">
                    <a href="javascript:void(0);">营养保健</a>
                </li>
                <li m_index="23" m_cid="5025" id="category32" class="">
                    <a href="javascript:void(0);">钟表</a>
                </li>
                <li m_index="24" m_cid="100001958" id="category33" class="">
                    <a href="javascript:void(0);">计生情趣</a>
                </li>
                <li m_index="25" m_cid="100002201" id="category34" class="">
                    <a href="javascript:void(0);">京东金融</a>
                </li>
                <li m_index="26" m_cid="4938" id="category35" class="">
                    <a href="javascript:void(0);">生活服务</a>
                </li>
                <li m_index="27" m_cid="100001502" id="category36" class="cur">
                    <a href="javascript:void(0);">旅游出行</a>
                </li>
            </ul>
        </div>
    </div>
    </div>

</body>

<script type="text/javascript">
$(function() {

    function getY(ele)
    {
        var c = ele.css("transform");
        if (!c)
        {
            c = ele.css("-webkit-transform")
        }

        if (c == "none")
        {
            c = 0
        }
        else
        {

  
            c = c.replace("matrix(1, 0, 0, 1, 0, ", "").replace(")", "");
            // c = c.replace(/.*[\,\s]+(\d+)\)$/, '$1px');
            
            // c = c.replace("matrix(1, 0, 0, 1, 0,", "").replace(")", "");
           
            c = parseInt(c, 10)

            // console.log(c);
        }
        if (!c)
        {
            c = 0
        }
        
        return c
    }


    function scrollTo(ele)
    {
        console.log(ele);
        var dd = 0;
        var cc = ele.attr('m_index');
        console.log(cc);
        if (cc < 27)
        {
            dd = (cc - 1) * 50 * -1
        }
        else
        {
            // d = f.scrollRootHeight * -1
        }
        var ee = {
            "-webkit-transform": "translateY(" + dd + "px)",
            "-webkit-transition": "0.2s ease 0s",
        };
        $("#category7").css(ee);

        // setTimeout(function()
        // {
        //     var g = {
        //         transform: "translateY(" + d + "px)",
        //         "-webkit-transform": "translateY(" + d + "px)",
        //         "-webkit-transition": "",
        //         transition: ""
        //     };
        //     $("#" + f.rootListUlId).css(g)
        // }, 200)

    }






var congfig = true ;


    $("#category7").on("touchstart", function()
    {

        startY = event.touches[0].clientY;
        scrollY = 0;

    });

    $("#category7").on("touchmove", function(E)
    {
        

        var f = event.touches[0].clientY;
        
        var i = f - startY ;

        if (congfig) 
        {
            cur_num = 0
        }

        // var e = getY($("#category7"));
        
        // console.log(cur_num);

        d =  cur_num + i;

        console.log(d);

        if (d > 150 )
        {
            d = 150
        }
        else
        {

            if (d < ( $(window).height() * -1 ) - 350)
            {
                d = ( $(window).height() * -1 - 350)
            }
        }

        $(this).css("-webkit-transform", "translateY(" + d + "px)");
        $(this).css("-webkit-transition", "0");

    });

    $("#category7").on("touchend", function(e)
    {
        console.log(66);

        congfig = false ;
        cur_num = getY($("#category7"));

        if (!d) 
        {
          d = 0 ;  
        }
        if ( d >= 150 || (d>0)) 
        {
            cur_num = 0 ;
            $(this).css("-webkit-transform", "translateY(" + 0 + "px)");
            $(this).css("-webkit-transition", "0.2s ease 0s");
        }

        if (d <= ( $(window).height() * -1 ) - 350)
        {
            cur_num = d + 140;
            $(this).css("-webkit-transform", "translateY(" + cur_num + "px)");
            $(this).css("-webkit-transition", "0.2s ease 0s");
        }


    })

    $("#category7 li").on('click', function(event) {
        event.preventDefault();
        $(this).parent().find("li").removeClass("cur");
        $(this).addClass("cur");
        var ele = $(this)
        scrollTo(ele);
        /* Act on the event */
    });
});
</script>

</html>